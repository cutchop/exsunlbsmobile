Ext.setup({ glossOnIcon: true, onReady: function () { var b = new Ext.form.FormPanel({ items: [{ xtype: "fieldset", id: "loginFormSet", title: "请登录", items: [{ xtype: "textfield", id: "username", name: "username", placeHolder: "用户名/设备号", label: "帐号" }, { xtype: "passwordfield", id: "password", name: "password", label: "密码", useClearIcon: true }, { xtype: "button", text: "登录", ui: "confirm", style: "margin:2%;", handler: function () { b.disable(); var d = Ext.util.Format.trim(b.getValues().username); var e = Ext.util.Format.trim(b.getValues().password); if (d == "") { Ext.Msg.alert("提示", "请输入帐号", Ext.emptyFn); b.enable(); return } if (e == "") { Ext.Msg.alert("提示", "请输入密码", Ext.emptyFn); b.enable(); return } var c = new Ext.LoadMask(Ext.getBody(), { msg: "请稍候..." }); c.show(); Ext.Ajax.request({ url: "handler/users.aspx?type=login", method: "post", params: { username: d, password: e }, success: function (f) { var g = Ext.decode(f.responseText)[0]; if (g.success) { window.location = "index.aspx" } else { c.hide(); Ext.Msg.alert("登录失败", g.msg, Ext.emptyFn); b.enable() } }, failure: function (f) { c.hide(); Ext.Msg.alert("登录失败", "可能是网络问题,请重试", Ext.emptyFn); b.enable() }, scope: this }) } }]}] }); var a = new Ext.Panel({ fullscreen: true, items: [b, { html: '<div style="margin: 0 auto;width:240px;"><a href="exsunandroid.apk" target="_blank"><img alt="android" src="android.png" /></a></div><div style="margin: 0 auto;width:240px;"><img alt="iphone" src="iphone.png" /></div>'}], scope: this }) } });